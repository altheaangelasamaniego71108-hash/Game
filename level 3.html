<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GUESS ME</title>


<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, #d6c3b6, #f0e6df);
    color: #111;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    min-height: 100vh;
  }

  h1 {
    margin: 10px 0 15px;
    font-size: 38px;
    color: #8b6c5c;
    text-shadow: 2px 2px 8px rgba(0,0,0,0.1);
    letter-spacing: 1px;
  }

  #game {
    width: 720px;
    max-width: 95%;
    background: rgba(255, 255, 255, 0.95);
    border-radius: 20px;
    padding: 28px;
    box-shadow: 0 10px 35px rgba(0,0,0,0.15);
    backdrop-filter: blur(6px);
    text-align: center;
  }

  #plateBox {
    width: 100%;
    height: 420px;
    border-radius: 16px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #fff;
    box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    margin-bottom: 16px;
  }

  #plateImg {
    max-width: 100%;
    max-height: 100%;
    display: none;
    border-radius: 16px;
    transition: transform 0.5s ease;
  }

  #plateImg:hover {
    transform: scale(1.05);
  }

  .controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    margin-bottom: 10px;
  }

  #timer {
    font-weight: 700;
    color: #8b6c5c;
  }

  .progress {
    flex: 1;
    height: 12px;
    background: #eee;
    border-radius: 8px;
    overflow: hidden;
    margin: 0 12px;
  }

  .progress > div {
    height: 100%;
    width: 100%;
    transition: width 1s linear;
    background: #8b6c5c;
  }

  .options {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 12px;
    margin-top: 10px;
  }

  button.option {
    padding: 14px;
    border-radius: 10px;
    border: 1px solid #ddd;
    background: #fff;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 3px 10px rgba(0,0,0,0.06);
    transition: all 0.25s ease;
  }

  button.option:hover {
    transform: scale(1.05);
    background: #eaddd3;
    box-shadow: 0 6px 16px rgba(0,0,0,0.12);
  }

  button.option.correct {
    background: #d4ffd9;
    border-color: #76d27a;
  }

  button.option.wrong {
    background: #ffd9d9;
    border-color: #ff7a7a;
  }

  #score {
    margin-top: 10px;
    font-weight: 700;
    color: #8b6c5c;
  }

  #startBtn, #playAgain {
    padding: 10px 18px;
    border-radius: 10px;
    border: none;
    background: #8b6c5c;
    color: #fff;
    cursor: pointer;
    font-size: 16px;
    transition: all 0.3s ease;
  }

  #startBtn:hover, #playAgain:hover {
    background: #a4826f;
    transform: scale(1.05);
  }

  #endMessage {
    display: none;
    background: #fff;
    padding: 22px;
    border-radius: 14px;
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    margin-top: 16px;
    text-align: center;
    animation: fadeIn 0.6s ease;
  }

  small.note {
    color: #555;
    display: block;
    margin-top: 6px;
  }

  .back-btn {
       position: absolute;
       top: 20px;
       left: 20px;
       font-size: 1em;
       padding: 8px 20px;
       border-radius: 20px;
       background-color: #8b5e3c;
       color: #fffaf0;
       border: none;
       cursor: pointer;
       transition: 0.3s;
     }

    .next-btn{
      position: absolute;
       top: 20px;
       right: 20px;
       font-size: 1em;
       padding: 8px 20px;
       border-radius: 20px;
       background-color: #8b5e3c;
       color: #fffaf0;
       border: none;
       cursor: pointer;
       transition: 0.3s;
  }

</style>
</head>
<body>
  <button class="back-btn" onclick="history.back()">Back</button>
  <button class="next-btn" onclick="window.location.href='level 4.html'"  >Next</button>
  <h1>GUESS ME</h1>
  <div id="game">
    <div id="plateBox">
      <img id="plateImg" src="" alt="Guess the animal">
    </div>

    <div class="controls">
      <div id="timer">Time: <span id="timeLeft">15</span>s</div>
      <div class="progress" aria-hidden="true"><div id="bar" style="width:100%"></div></div>
      <div id="round">Q: <span id="qnum">0</span>/5</div>
    </div>

    <div class="options" id="options"></div>

    <div style="display:flex;gap:12px;align-items:center;margin-top:10px;">
      <div id="score">Score: 0</div>
      <button id="startBtn">Start Game</button>
    </div>

    <div id="endMessage">
      <h2 id="endTitle"></h2>
      <p id="finalText"></p>
      <button id="playAgain">Play Again</button>
      <small class="note">Try again to beat your score!</small>
    </div>
  </div>

<script>
const plates = [
  {src: "dog.jpg", answer: "dog"},
  {src: "dolphin.jpg", answer: "dolphin"},
  {src: "penguin.jpg", answer: "penguin"},
  {src: "owl.jpg", answer: "owl"},
  {src: "panda.jpg", answer: "panda"}
];

const TOTAL_QUESTIONS = 5;
const TOTAL_TIME = 15; 

let asked = 0;
let score = 0;
let currentPlate = null;
let timeLeft = TOTAL_TIME;
let timerInterval = null;

const plateImg = document.getElementById("plateImg");
const optionsDiv = document.getElementById("options");
const timeLeftSpan = document.getElementById("timeLeft");
const bar = document.getElementById("bar");
const qnum = document.getElementById("qnum");
const scoreDiv = document.getElementById("score");
const startBtn = document.getElementById("startBtn");
const endMessageDiv = document.getElementById("endMessage");
const endTitle = document.getElementById("endTitle");
const finalText = document.getElementById("finalText");
const playAgainBtn = document.getElementById("playAgain");

startBtn.addEventListener("click", startGame);
playAgainBtn.addEventListener("click", startGame);

function startGame(){
  asked = 0;
  score = 0;
  timeLeft = TOTAL_TIME;
  scoreDiv.innerText = "Score: 0";
  endMessageDiv.style.display = "none";
  startBtn.style.display = "none";
  plateImg.style.display = "block";
  startTimer();
  nextQuestion();
}

function startTimer() {
  clearInterval(timerInterval);
  timerInterval = setInterval(() => {
    timeLeft--;
    updateTimerDisplay();
    if (timeLeft <= 0) {
      clearInterval(timerInterval);
      endGame();
    }
  }, 1000);
}

function nextQuestion(){
  if(asked >= TOTAL_QUESTIONS){
    endGame();
    return;
  }

  currentPlate = plates[asked];
  asked++;
  qnum.innerText = asked;
  plateImg.src = currentPlate.src;

  const correct = currentPlate.answer;
  let choices = [correct];
  while (choices.length < 4) {
    const random = plates[Math.floor(Math.random() * plates.length)].answer;
    if (!choices.includes(random)) choices.push(random);
  }
  choices.sort(() => Math.random() - 0.5);

  optionsDiv.innerHTML = "";
  choices.forEach(ch => {
    const btn = document.createElement("button");
    btn.className = "option";
    btn.innerText = ch;
    btn.onclick = () => selectAnswer(ch, btn);
    optionsDiv.appendChild(btn);
  });
}

function updateTimerDisplay(){
  timeLeftSpan.innerText = timeLeft;
  const pct = Math.max(0, (timeLeft / TOTAL_TIME) * 100);
  bar.style.width = pct + "%";
  bar.style.background = timeLeft <= 5 ? "#e53935" : "#8b6c5c";
}

function selectAnswer(choice, btn){
  const correct = currentPlate.answer;
  if(choice === correct) {
    score++;
    btn.classList.add("correct");
  } else {
    btn.classList.add("wrong");
    timeLeft = Math.max(0, timeLeft - 1);
    updateTimerDisplay();
  }
  scoreDiv.innerText = "Score: " + score;

  setTimeout(() => {
    nextQuestion();
  }, 400);
}

function endGame(){
  clearInterval(timerInterval);
  plateImg.src = "";
  plateImg.style.display = "none";
  optionsDiv.innerHTML = "";
  startBtn.style.display = "inline-block";
  endMessageDiv.style.display = "block";

  if (score === TOTAL_QUESTIONS) {
    endTitle.innerText = "Congratulations!";
  } else {
    endTitle.innerText = "Game Over!";
  }
  finalText.innerText = `Your score: ${score} / ${TOTAL_QUESTIONS}`;
}
</script>
</body>
</html>